{% extends 'public/base.html' %}
{% block title %} 周计划 {% endblock %}
{% block style %}
{% endblock %}

{# 主体内容#}
{% block content %}
    <div class="content-wrapper" ng-controller="myCtrl">
        {% verbatim %}
        <!-- Main content -->
        <section class="content">
            <!-- Small boxes (Stat box) -->
            <!-- 容器 DOM -->

            <ul id="myTab" class="nav nav-tabs">

                <li class="dropdown">
                    <a href="#" id="myTabDrop1" class="dropdown-toggle"
                       data-toggle="dropdown">周一
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">
                        <li><a href="#home" id='1' ng-click="getWeekTask(1)" tabindex="-1" data-toggle="tab">浏览任务</a></li>
                        <li><a href="#ejb" tabindex="-1" data-toggle="tab" ng-click="show_addweekTask(1)">添加任务</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" id="myTabDrop1" class="dropdown-toggle"
                       data-toggle="dropdown">周二
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">
                        <li><a href="#home" id='2' ng-click="getWeekTask(2)" tabindex="-1" data-toggle="tab">浏览任务</a></li>
                        <li><a href="#ejb" tabindex="-1" data-toggle="tab" ng-click="show_addweekTask(2)">添加任务</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" id="myTabDrop1" class="dropdown-toggle"
                       data-toggle="dropdown">周三
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">
                        <li><a href="#home" id='3' ng-click="getWeekTask(3)" tabindex="-1" data-toggle="tab">浏览任务</a></li>
                        <li><a href="#ejb" tabindex="-1" data-toggle="tab" ng-click="show_addweekTask(3)">添加任务</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" id="myTabDrop1" class="dropdown-toggle"
                       data-toggle="dropdown">周四
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">
                        <li><a href="#home" id='4' ng-click="getWeekTask(4)" tabindex="-1" data-toggle="tab">浏览任务</a></li>
                        <li><a href="#ejb" tabindex="-1" data-toggle="tab" ng-click="show_addweekTask(4)">添加任务</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" id="myTabDrop1" class="dropdown-toggle"
                       data-toggle="dropdown">周五
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">
                        <li><a href="#home" id='5' ng-click="getWeekTask(5)" tabindex="-1" data-toggle="tab">浏览任务</a></li>
                        <li><a href="#ejb" tabindex="-1" data-toggle="tab" ng-click="show_addweekTask(5)">添加任务</a></li>
                    </ul>
                </li>
            </ul>
            <div id="myTabContent" class="tab-content">
                <div class="tab-pane fade in active" id="home">

                     <div class="noData" ng-if="!isShow">
                        暂无记录
                    </div>
                    <div class="box" ng-if="isShow" style="background:white;" ng-cloak>
                        <table id="tab_data"  class="table table-bordered table-striped">
                            <thead>


                                <th style="width:4%">序号</th>
                                <th style="width:8%">任务</th>
                                <th style="width:8%">时间</th>
                                <th style="width:11%">广播文件</th>
                                <th style="width:8%">状态</th>
                                <th style="width:8%">操作</th>

                            </thead>
                            <tbody>
                            <tr style="width: 20px" ng-repeat="item in musers | orderBy : 'sort_num' "
                                on-finish-render="ngRepeatFinished">
                                <td align="center" ng-bind="$index+1">
                                <td id="name">
                                    <div align="center">{{ item.name }}</div>
                                </td>
                                <td>
                                    <div align="center">{{ item.time }}</div>
                                </td>
                                <td>
                                    <div align="center">{{ item.mp3 }}</div>
                                </td>

                                <td>
                                    <div align="center">{{ item.state }}</div>
                                </td>
                                <td>
                                    <div align="center">
                                        <button type="button" class="btn bg-blue btn-flat btn-xs"
                                                ng-click="handleEdite(this)">
                                            编辑
                                        </button>
                                        <button type="button" class="btn bg-red btn-flat btn-xs"
                                                ng-click="Delete(this)">
                                            删除
                                        </button>


                                    </div>

                                </td>

                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="tab-pane fade" id="ejb">
                    <div class="box" style="background:white" ng-cloak>
                        <table id="tab_data" class="table table-bordered table-striped">
                            <thead>
                            <tr>

                                <th style="width:4%">序号</th>
                                <th style="width:15%">任务名称</th>
                                <th style="width:20%">时间</th>
                                <th style="width:30%">广播文件</th>
                                <th style="width:20%">状态</th>
                                <th style="width:5%">操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr style="width: 20px">
                                <td align="center" ng-bind="$index+1">
                                <td id="name">
                                    <div align="center"><input type="text"  class="form-control" ng-model="w_name"></div>
                                </td>
                                <td>
                                    <div align="center"><input type='text' id="tasktime"
                                                               class="form-control timepicker timepicker-default"
                                                               ng-model="w_time"/></div>
                                </td>
                                <td>
                                    <div align="center"><select data-edit-select="1"
                                                                onmousedown="if(this.options.length>3){this.size=8}"
                                                                onblur="this.size=0" onchange="this.size=0"
                                                                class="form-con" ng-options="mp3.mp3 for mp3 in mp3s"
                                                                ng-model="w_mp3">
                                        <option value="">请选择</option>
                                    </select></div>
                                </td>

                                <td>
                                    <div align="center">
                                        <select class="form-control" ng-model="w_state">
                                            <option value="2">开启</option>
                                            <option value="1">暂停</option>

                                        </select></div>
                                </td>
                                <td>
                                    <div align="center">
                                        <button type="button" class="btn bg-green btn-flat btn-xs"
                                                ng-click="addweekTask(this)">
                                            添加
                                        </button>


                                    </div>

                                </td>

                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="editModel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 data-backdrop="static">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"
                                    aria-hidden="true">×
                            </button>
                            <h4 class="modal-title" id="editTitle">
                            </h4>
                        </div>
                        <div class="modal-body" id="editNum">
                            <div class="row">
                                <div class="col-md-12">
                                    <form id="form1" class="form-horizontal form" role="form" method="post">
                                        <table class="table table-bordered table_sxcondition">
                                            <tbody>
                                            <tr>
                                                <th width="20%">任务名：</th>
                                                <td width="80%">
                                                    <input type="text" class="form-control" ng-model="name">
                                                </td>
                                            </tr>
                                            <tr>
                                                <th width="20%">任务时间：</th>
                                                <td width="80%">
                                                    <input type='text' id="tasktimes"
                                                           class="form-control timepicker timepicker-default"
                                                           ng-model="time"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th width="20%">音乐：</th>
                                                <td width="80%">
                                                    <select data-edit-select="1"
                                                            onmousedown="if(this.options.length>3){this.size=8}"
                                                            onblur="this.size=0" onchange="this.size=0"
                                                            style="position:absolute;z-index:1;"
                                                            class="form-con" ng-options="mp3.mp3 for mp3 in mp3s"
                                                            ng-model="mp3">
                                                        <option value="">请选择</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr >
                                                <th width="20%">状态：</th>
                                                <td width="80%">
                                                    <select class="form-control" ng-model="state">
                                                        <option value="2">开启</option>
                                                        <option value="1">暂停</option>

                                                    </select>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </form>
                                </div>
                                <div class="col-md-2"></div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default"
                                    data-dismiss="modal">关闭
                            </button>
                            <button type="button" class="btn btn-primary" ng-click="saveEdit()">
                                保存
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div>
            <div class="modal fade" id="rev_Model" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 data-backdrop="static">
                <div class="modal-dialog" style="width: 20%">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"
                                    aria-hidden="true">×
                            </button>
                            <div class="modal-title">
                                是否继续添加
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default"
                                    data-dismiss="modal"  ng-click="close()">关闭
                            </button>
                            <button type="button" class="btn btn-primary btn-flat" ng-click="rev_add()">
                                确认
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div>
        </section>
        <!-- /.content -->
        {% endverbatim %}

    </div>

{% endblock %}
{% block script %}
    <script src="../static/js/plan.js"></script>
{% endblock %}